# German Wiktionary xml Parser
[![License: GPL v3](https://img.shields.io/badge/License-GPL%20v3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)

A python library for parsing a [German wiktionary xml file](https://dumps.wikimedia.org/dewiktionary), with an option to export the results to .json format.

The current version implements the extraction of select information about German nouns (such as gender, declension, special word type information), as well as extracting English translations of German nouns and abbreviations.

## Contents

* [The resources](#resources)
* [Dictionary types](#dictionary-types)
* [Dictionary structure](#dictionary-structure)
	* [The basic structure of a `GermanNounEntriesDict` dictionary](#dictionary-GermanNounEntriesDict)
	* [The basic structure of a  `GermanNounEntriesTranslationDict` dictionary](#dictionary-GermanNounEntriesTranslationDict)
    * [Some remarks on the entries](#remarks)
* [Installation](#installation)
* [A sample script to start with](#sample)
* [Authors and license](#authors-and-license)


## <a name="resources"></a>The resources
There are two resources that you can find here right now: 
1. the dictionary files (JSON) under the **[data](./data/)** directory;
2. the Python scripts under the **[src](./src/)** directory that generate these dictionaries.

If you only need the dictionaries as we generated them from the .xml source ([the 1 June 2018 dump from Wiktionary](https://dumps.wikimedia.org/dewiktionary/20180601/dewiktionary-20180601-pages-meta-current.xml.bz2)), *you do not need to install the present Python package*: just use the 
dictionary you need from the **[data](./data/)** folder. (See [README](./data/README.md) under the **data** folder for a description of the dictionaries in it.) 

However, if you want to generate your own versions, or want to extend the script, or experiment with it on your own, you will need to install it. We have packed everything you need into a file named `dewiktionaryparser-0.1.tar.gz` which you should be able to easily and automatically install on 
any computer with Python 3 installed (see the [section on installation](#installation)). 

## <a name="dictionary-types"></a>Dictionary types 
We have defined three classes, corresponding to three different, though related dictionary types: 
1. `GermanNounEntriesDict`: the instances of this class are dictionaries the entries of which contain grammatical (in particular, usage-related and morphological) information about the German nouns in the German wiktionary
2. `GermanNounEntriesTranslationDict`: the instances of this class are dictionaries the entries of which contain (for the time being, only English) translations of the entries of a `GermanNounEntriesDict` (if such translations exist in the German wiktionary)
3. `WordEntriesDict`: the superclass of the two classes above

`GermanNounEntriesDict` and `GermanNounEntriesTranslationDict` dictionaries are generated by a parser script that parses the German Wiktionary xml pages into these two kinds of dictionary. The result of the parsing phase can then be exported (saved) in the popular JSON format. Beside generating and storing the dictionaries, there are methods and functions that manipulate, search, or display these dictionaries (see the sections below).      

## <a name="dictionary-structure"></a>Dictionary structure
     
This section offers a quick overview of the structure of the two main dictionary types `GermanNounEntriesDict` and `GermanNounTranslationDict`. For a more detailed description of the dictionaries and the features employed, please refer to [the *help_dictionaries.md* documentation file on 
dictionaries](
./docs/help_dictionaries.md) in the *docs* folder.

### <a name="dictionary-GermanNounEntriesDict"></a>The basic structure of a `GermanNounEntriesDict` dictionary
```
{
 <noun_headword>: 
	{'u<usage_#>': 
		{'gen_case_num':
			{'genus': 
				{'sg<decl_#>': ['m'|'f'|'n',]},
			'akkusativ': 
				{'plural': 
					{'pl<decl_#>': [<pluralform1>,]},
				'singular': 
					{'sg<decl_#>': [<sgform1>,]}},
			'dativ':
				{'plural': 
					{'pl<decl_#>': [<pluralform1>,]},
				'singular': 
					{'sg<decl_#>': [<sgform1>,]}},
			'genitiv': 
				{'plural': 
					{'pl<decl_#>': [<pluralform1>,]},
				'singular': 
					{'sg<decl_#>': [<sgform1>,]}},
			'nominativ': 
				{'plural': 
					{'pl<decl_#>': [<pluralform1>,]},
				'singular': 
					{'sg<decl_#>': [<sgform1>,]}}
			},
		{'spec_pre':
			{'genus_pre': 
				{'sg<decl_#>': ['m'|'f'|'n',]},
			'akkusativ_pre': 
				{'plural_pre': 
					{'pl<decl_#>': [<pluralform1>,]},
				'singular_pre': 
					{'sg<decl_#>': [<sgform1>,]}},
			'dativ_pre':
				{'plural_pre': 
					{'pl<decl_#>': [<pluralform1>,]},
				'singular_pre': 
					{'sg<decl_#>': [<sgform1>,]}},
			'genitiv_pre': 
				{'plural_pre': 
					{'pl<decl_#>': [<pluralform1>,]},
				'singular_pre': 
					{'sg<decl_#>': [<sgform1>,]}},
			'nominativ_pre': 
				{'plural_pre': 
					{'pl<decl_#>': [<pluralform1>,]},
				'singular_pre': 
					{'sg<decl_#>': [<sgform1>,]}}
			},
		'decl_type': ['adj'|'-sch'],
		'tantum': ['Sg'|'Pl'],
		'spec_word_type': ['Abkürzung'|'Toponym'|'Eigenname'|'Nachname'|'Vorname'|'Name'|'Straßenname'],
		},
	},
}
```

### <a name="dictionary-GermanNounEntriesTranslationDict"></a>The basic structure of a  `GermanNounEntriesTranslationDict` dictionary

```
{
 <noun_headword>: 
	{'u<usage_#>': 
		{'translations':
			{'en': 
				{'m<lexeme_#>': [<EN-translation1>,]},
			},
		},
	},
}
```

## <a name="installation"></a>Installation and usage

To install dewiktionaryparser, navigate to the **[dist](./dist/)** directory of this package and run the following command in your terminal:

`pip install dewiktionaryparser-1.0.tar.gz`

Note that you need to have a version of [**Python 3**](https://www.python.org/downloads/) installed on your computer.  (The scripts have been tested on Python 3.5 and 3.6 in a Windows environment.)

For a detailed description of the Python modules in this package and their use, please refer to [the *help_python_modules.md* documentation file](
./docs/help_python_modules.md) in the *docs* folder.

## <a name="sample"></a>A sample script to start with
The following simple script generates and stores a grammatical and a translation dictionary, as well as enhances the former with information from the latter.

```python
# import the noun parser module functions:
import dewiktionaryparser as dw

##################################################################
# Generate dictionary with grammatical information from xml file #
##################################################################

# initialize a dictionary for grammatical information:
word_entries = dw.GermanNounEntriesDict()

# generate entries from dewiktionary-20180601-pages-meta-current.xml located in the data folder under current working directory:
word_entries.generate_entries('.\data\dewiktionary-20180601-pages-meta-current.xml')

# save the resulting dictionary under the data folder of the current working dictionary:
word_entries.export_to_json('.\data\de_noun_info.json')


##################################################################
# Generate dictionary with translation information from xml file #
##################################################################

# initialize a dictionary for translation information:
translations = dw.GermanNounTranslationDict()

# generate entries from dewiktionary-20180601-pages-meta-current.xml located in the data folder under current working directory:
translations.generate_translations('.\data\dewiktionary-20180601-pages-meta-current.xml')

# save the resulting information dictionary under the data folder of the current working dictionary:
translations.export_to_json('.\data\de_noun_translations.json')


##################################################################
# Enhancing grammatical dictionary with translation information  #
##################################################################

word_entries.enhance_usages(translations)

# save the resulting dictionary under the data folder of the current working dictionary:
word_entries.export_to_json('.\data\de_noun_entries_with_translations.json')
```

See also the **[sample_script.py](./src/sample_script.py)** script in the src directory.

## <a name="authors-and-license"></a>Authors and license

### The program
Copyright (C) 2018 Zsófia Gyarmathy and Károly Varasdi

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.

### The language data from Wiktionary

The language data from Wiktionary (<https://de.wiktionary.org/>) is dual-licensed under the Creative Commons Attribution-ShareAlike 3.0 Unported License (CC-BY-SA) and the GNU Free Documentation License (GFDL).

 * For the full text of CC BY-SA, see [LICENSE-CC-BY-SA](./data/LICENSE-CC-BY-SA) under the data folder or visit <https://en.wiktionary.org/wiki/Wiktionary:Text_of_Creative_Commons_Attribution-ShareAlike_3.0_Unported_License>
 * For the full text of GFDL, see [LICENSE-GFDL](./data/LICENSE-GFDL) under the data folder or visit <https://en.wiktionary.org/wiki/Wiktionary:Text_of_the_GNU_Free_Documentation_License>
 
